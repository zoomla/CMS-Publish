@functions{
    //protected B_ExClassgroup ell = new B_ExClassgroup();
    //private B_Course bcourse = new B_Course();
    //protected void Page_Load(object sender, EventArgs e)
    //{
    //    if (!IsPostBack)
    //    {
    //        if (Request.QueryString["cid"] != null)
    //        {
    //            string cid = Request.QueryString["cid"].ToString();
    //            M_ExClassgroup cinfo = ell.GetSelect(DataConverter.CLng(cid));
    //            this.txt_Regulationame.Text = cinfo.Regulationame.ToString();
    //            txt_Endtime.Text = cinfo.Endtime.ToString();
    //            txt_Ratednumber.Text = cinfo.Ratednumber.ToString();
    //            txt_Regulation.Text = cinfo.Regulation.ToString();
    //            txt_Regulation.Text = cinfo.Regulation.ToString();
    //            txt_Setuptime.Text = cinfo.Setuptime.ToString();
    //            txtShiPrice.Text = cinfo.ShiPrice.ToString();
    //            txtLinkPrice.Text = cinfo.LinPrice.ToString();
    //            txtCoureTime.Text = cinfo.CourseHour.ToString();
    //            rbl.Checked = cinfo.Presented == 1 ? true : false;
    //            classtype.SelectedValue = cinfo.ClassID.ToString();
    //            classid_Hid.Value = cid;
    //            this.EBtnSubmit.Text = "修改班级";
    //        }
    //    }
    //}

    //private string GetCourese(int courseid)
    //{
    //    M_Course mcourse = bcourse.GetSelect(courseid);
    //    if (mcourse != null && mcourse.id > 0)
    //    {
    //        return mcourse.CourseName;
    //    }
    //    else
    //    {
    //        return "";
    //    }
    //}

    //protected void EBtnSubmit_Click(object sender, EventArgs e)
    //{
    //    string strDay = calculateTime(txt_Setuptime.Text, txt_Endtime.Text);
    //    //if (strDay != null)
    //    //{
    //    //    if (Convert.ToInt32(strDay) <= 0)
    //    //    {
    //    //        ClientScript.RegisterStartupScript(this.GetType(), "", "<script>alert('结束时间不能小于或等于建立时间');</script>");
    //    //        return;
    //    //    }
    //    //    else
    //    //    {
    //    //        lbDay.Text = strDay + "天";
    //    //    }
    //    //}
    //    //else
    //    //{
    //    //    ClientScript.RegisterStartupScript(this.GetType(), "", "<script>alert('建立与结束时间错误！');</script>");
    //    //    return;
    //    //}
    //    M_ExClassgroup exinfo = new M_ExClassgroup();
    //    //exinfo.Actualnumber =DataConverter.CLng(this.txt_Actualnumber.Text);
    //    exinfo.Endtime = DataConverter.CDate(txt_Endtime.Text);
    //    exinfo.Ratednumber = DataConverter.CLng(txt_Ratednumber.Text);
    //    exinfo.Regulation = txt_Regulation.Text;
    //    exinfo.Regulationame = txt_Regulationame.Text;
    //    exinfo.Setuptime = DataConverter.CDate(txt_Setuptime.Text);
    //    exinfo.ShiPrice = DataConverter.CDouble(txtShiPrice.Text);
    //    exinfo.LinPrice = DataConverter.CDouble(txtLinkPrice.Text);
    //    exinfo.CourseHour = DataConverter.CLng(txtCoureTime.Text);
    //    exinfo.Presented = rbl.Checked ? 1 : 0;
    //    exinfo.ClassID = DataConverter.CLng(classtype.SelectedValue);
    //    if (!string.IsNullOrEmpty(Request.QueryString["cid"]))
    //    {
    //        int txt_Groupid = DataConverter.CLng(Request.QueryString["cid"].ToString());
    //        exinfo.GroupID = txt_Groupid;
    //        ell.GetUpdate(exinfo);
    //        function.WriteSuccessMsg("修改成功!", "ClassManage.aspx");
    //    }
    //    else
    //    {
    //        ell.GetInsert(exinfo);
    //        function.WriteSuccessMsg("添加成功!", "ClassManage.aspx");
    //    }
    //}
    //public string calculateTime(string strdt1, string strdt2)
    //{
    //    DateTime dt1 = new DateTime();
    //    DateTime dt2 = new DateTime();
    //    try
    //    {
    //        dt1 = DateTime.Parse(strdt1.Trim());
    //        dt2 = DateTime.Parse(strdt2.Trim());
    //    }
    //    catch
    //    {
    //        return null;
    //    }
    //    TimeSpan ts1 = new TimeSpan(dt1.Ticks);
    //    TimeSpan ts2 = new TimeSpan(dt2.Ticks);

    //    return (ts2 - ts1).Days.ToString();
    //}

 }
@section head{ 
 <link type="text/css" href="/res/css/bootstrap-switch.min.css" rel="stylesheet" />
        <title>编辑班级</title>
}
@section content{ 
<div id="pageflag" data-nav="edu" data-ban="ke"></div>
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <asp:HiddenField runat="server" ID="classid_Hid" />
    <div class="container margin_t5">
         <ol class="breadcrumb">
        <li><a href="/User/">用户中心</a></li>
        <li><a href="ClassManage.aspx">班级管理</a></li>
        <li class="active">编辑班级</li> 
        </ol>
</div>
    <div class="container btn_green">
    <table class="table table-striped table-bordered table-hover">
        <tbody id="Tabs0">
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="ssjd_txt" runat="server" Text="班级名称："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <asp:TextBox ID="txt_Regulationame" runat="server" class="form-control text_md" ></asp:TextBox>
                    &nbsp;<font color="red">*</font>
                </td>
            </tr>
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Label7" runat="server" Text="班级类别："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <asp:DropDownList ID="classtype" runat="server" CssClass="form-control text_md"></asp:DropDownList>
                    &nbsp;</td>
            </tr>
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Label9" runat="server" Text="负责人："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <asp:TextBox ID="txt_Regulation" runat="server" class="form-control text_md" ></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Label3" runat="server" Text="售价："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <asp:TextBox ID="txtShiPrice" runat="server" class="form-control text_md"  ></asp:TextBox>
                    <asp:RegularExpressionValidator ID="RegularExpressionValidator13"
                        runat="server" ControlToValidate="txtShiPrice" ErrorMessage="售价格式不对!" ValidationExpression="\d+[.]?\d*"
                        Display="Dynamic" SetFocusOnError="True"></asp:RegularExpressionValidator>
                </td>
            </tr>
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Label4" runat="server" Text="优惠价："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <asp:TextBox ID="txtLinkPrice" runat="server" class="form-control text_md" ></asp:TextBox>
                    <asp:RegularExpressionValidator ID="RegularExpressionValidator1"
                        runat="server" ControlToValidate="txtLinkPrice" ErrorMessage="优惠价格式不对!" ValidationExpression="\d+[.]?\d*"
                        Display="Dynamic" SetFocusOnError="True"></asp:RegularExpressionValidator>
                </td>
            </tr>
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Label5" runat="server" Text="课时："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <asp:TextBox ID="txtCoureTime" runat="server" class="form-control text_md"  ></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Label6" runat="server" Text="订购此班级是否赠送此课程："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <input type="checkbox" runat="server" id="rbl" class="switchChk"/>
                </td>
            </tr>
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Ratednumber_name" runat="server" Text="额定人数："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <asp:TextBox ID="txt_Ratednumber" runat="server" class="form-control text_xs"  ></asp:TextBox>
                    人
                </td>
            </tr>
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Label14" runat="server" Text="建立时间："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <asp:TextBox ID="txt_Setuptime" runat="server" class="form-control text_md"  onclick="WdatePicker({ dateFmt: 'yyyy/MM/dd' });"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Label15" runat="server" Text="结束时间："></asp:Label>
                    &nbsp;
                </td>
                <td class="bqright">
                    <asp:TextBox ID="txt_Endtime" runat="server" class="form-control text_md"   onclick="WdatePicker({ dateFmt: 'yyyy/MM/dd' });"></asp:TextBox>
                </td>
            </tr>

            <tr>
                <td class="tdbgleft" style="width: 20%" align="right">
                    <asp:Label ID="Label8" runat="server" Text="开班天数："></asp:Label>
                </td>
                <td class="bqright">
                    <asp:Label ID="lbDay"  runat="server" CssClass="form-control text_xs"></asp:Label>
                </td>
            </tr>
        </tbody>
        <tr class="tdbgbottom">
            <td colspan="2">

                <asp:Button ID="EBtnSubmit" class="btn btn-primary" Text="添加班级" runat="server" OnClick="EBtnSubmit_Click" />
                &nbsp;
                <a href="ClassManage.aspx" class="btn btn-primary">返回列表</a>
            </td>
        </tr>
    </table>
    </div>
}
@section script{ 
    <script type="text/javascript" src="/res/js/bootstrap-switch.js"></script>
    <script src="/JS/DatePicker/WdatePicker.js"></script>
    <script type="text/javascript" src="/JS/Controls/ZL_Dialog.js"></script>
    <script type="text/javascript">
        var typediag = new ZL_Dialog();
        function Openwin() {
            typediag.title = "选择分类";
            typediag.url = "SelectCourse.aspx";
            typediag.ShowModel();
        }
    </script>
}